(function(t){"use strict";var e="app",n="value",i="values",r="text",s="$shown",o="$deps",a="attrs",u="routes",h="_item_name",c="data-index",l="data-tie",d="data-tied",f=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};Array.prototype._=function(t){return L.forEach(this,function(e){t.hasOwnProperty(e)||(t[e]={_item_name:e})}),t};var v=function(t){var e=function(e,n,r){if(!n||!n._proxyMark){var o=function(){return n?n.get?n.get.call(e):n.value:e.$attr(r)},h=function(o){n?n.set?n.set.call(this,o):n.value=o:e.$attr(r,o),r==s?t.show(o):(r==a?t.prepareAttrs():r==u?t.prepareRoutes():r==i&&t.prepareValues(),L.debug("Calling apply on '"+t.name+"' after changed property '"+r+"'"),t.apply())},c=n?n.enumerable:!1;Object.defineProperty(e,r,{get:o,set:h,configurable:!0,enumerable:c,_proxyMark:!0})}},n=function(r){for(var s in r)if(r.hasOwnProperty(s)){if(h.push(s),"prototype"==s)continue;var c=Object.getOwnPropertyDescriptor(r,s);if(c._proxyMark)continue;if(!c.configurable||void 0===c.value&&!c.set||c.writable===!1)continue;var l="$"===s.charAt(0)&&-1!=t.depends.indexOf(s.substring(1)),d=r[s];L.isObject(d)&&!l&&s!=a&&s!=u&&s!=o&&s!=i&&(L.debug("Exploring "+s),n(d)),L.debug("Observing "+s),e(r,c,s,l)}r.attrs&&L.forIn(r.attrs,function(t,n){-1==h.indexOf(n)&&(t.property||t.value)&&(L.debug("Observing attribute "+n),e(r,null,n),h.push(n))},this)},r=t.obj,h=[];return L.debug("Exploring "+t.name),n(r),r},y={list:{},init:function(t){t.obj.routes&&(L.forIn(t.obj.routes,function(t,e){e=e.toLowerCase(),this.list[e]=new b(e,t.handler)},this),L.debug("Routes init"))},locate:function(e){var n=t.location.hash.substring(1);n=this.find(n),n?(L.debug("Process route "+n.path),H.location=function(e){return e?(this.move(e),null):{href:t.location.href,route:n}}.bind(this),n.handler&&M(n.handler,H.obj),L.forIn(e,function(t){var e=t.obj;e.$location=H.location;var i=n.has(e);e.$shown=i,t.rendered||t.render(),t.validateShow();var r=e.routes;if(r&&i){var s=r[n.path];s&&s.handler&&M(s.handler,e)}}),L.debug("Processed route "+n.path)):H.obj.routes?this.move("/"):(L.debug("Process default route"),L.forIn(e,function(t){t.rendered||t.render(),t.obj.$location=function(){return{route:{has:function(){return!0}}}},t.obj.$shown=!0}),L.debug("Processed default route"))},find:function(t){return this.list[t]},move:function(e){setTimeout(function(){t.location.hash="#"+e},100)}},b=function(t,e){this.path=t,this.handler=e};b.prototype={has:function(t){var e=t.routes;if(e){var n=null!=e["-"],i=!1;return L.forIn(e,function(t,e){return e.toLowerCase()==this.path?(i=!0,!1):!0},this),n!=i}return!1}};var m={},g=function(t,e,n){if(L.isUndefined(e))return m[t];var i={canWrite:!1,changeRoutes:!1,changeAttrs:!1};L.isDefined(n)&&L.extend(i,n);var r={fn:e,opts:i},s=new q(r);return m[t]=s,s},$=function(t){var e=t.indexOf(":");if(this.name=L.trim(e+1?t.substr(0,e):t),this.params="",e>=0){var n=L.trim(t.substr(++e));n="["+n+"]",this.params=n}};$.prototype={process:function(t,e,n){var i=m[this.name];if(!i)throw Error("Pipe "+this.name+" not found");var r=i.fn,s=[];if(this.params.length>0){var o=L.extend({},t);o=L.extend(o,i);var a=L.convert(this.params,o);L.forEach(a,function(t){t=L.trim(t),s.push(t)})}var u=L.isDefined(n)&&this.canWrite()?t:L.clone(t);return r&&L.isFunction(r)&&(u=M(r,i,!0,u,s,e,n)),u},canWrite:function(){var t=m[this.name];return t?t.opts.canWrite:!1},changeRoutes:function(){var t=m[this.name];return t?t.opts.changeRoutes:!1},changeAttrs:function(){var t=m[this.name];return t?t.opts.changeAttrs:!1}};var j={type:"GET",mime:"json"},x={script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},E=function(t){this.memoize={},this.cache=!0,t&&(t.url&&(this.url=t.url),t.params&&(this.params=t.params),t.headers&&(this.headers=t.headers),t.dataType&&(this.dataType=t.dataType),L.isDefined(t.cache)&&(this.cache=t.cache))},w=function(t,e){var n=t.xhr,i=n.status;if(i>=200&&300>i||0===i){var r=C(t,n,e);return O(t,r,null),r}return O(t,n.responseText,i),null},O=function(t,e,n){t.done(e,n)},A=function(t,e,n,i){i&&(e["Content-Type"]=i),n&&(e.Accept=x[n]),L.forIn(e,function(e,n){t.setRequestHeader(n,e)})},C=function(t,e,n){var i;if(i=e.responseText)if(n===j.mime)try{i=JSON.parse(i)}catch(r){O(t,i,r)}else"xml"===n&&(i=e.responseXML);return i},S=function(t,e,n){var i=n;if(H&&H.connect&&H.connect[e]){var r=H.connect[e];i=L.isObject(i)?L.extend(i,r):s}var s=t[e];return s&&(i=L.isObject(i)?L.extend(i,s):s),i},T=function(t,e){this.xhr=t,this.ready=!1,this.fn=e};T.prototype={cancel:function(){this.xhr&&this.xhr.abort(),this.ready=!1,delete this.data,delete this.err},done:function(t,e){this.ready=!0,this.data=t,this.err=e,this.fn?M(this.fn,this,!0,t,e):console.log("Response received:"+t)}};var I=function(t){return function(e,n){n?console.err(n):L.isObject(e)?L.extend(t,e):console.log("Response received:"+e)}},P=function(t,e){if(!t)return t;var n=t.indexOf("?"),i=t.substring(0,n+1?n:t.length),r=i.split("/");return L.forEach(r,function(n){if(":"===n[0]){var i=n.substr(1),r=e[i];L.isDefined(r)&&(t.replace(n,r),delete e[i])}}),t},U=function(t,e){e&&(t.params?L.extend(t.params,e):t.params=e)},k=function(t,e){var n="";e&&(n=e.indexOf("?")+1?"&":"?");var i=n;return L.forIn(t,function(t,e){i!==n&&(i+="&"),i+=e+"="+t}),i===n?"":i},D=function(e,n,i){var r=e.getType(),s=e.getUrl(),o=e.getParams(),a=e.getDataType(),u=e.getContentType(),h=e.getHeaders(),c=null;if(s=P(s,o),r===j.type?(s+=k(o,s),e.cache&&!i&&(c=e.memo(s,a))):o=k(o),/=\$JSONP/gi.test(s))return this.jsonp(s,data);var l=new t.XMLHttpRequest,d=null;L.isFunction(n)?d=n:L.isObject(n)&&(d=I(n));var f=T(l,d);if(c)O(f,c,null);else{l.onreadystatechange=function(){if(4===l.readyState){var t=w(f,a);t&&r===j.type&&e.cache&&e.memo(s,a,t)}return null},l.open(r,s),A(l,h,u,a);try{l.send(o)}catch(v){l=v,O(p,null,v)}}return f},R=function(e,n,i){var r=e.url,s=e.params,o=t.document.getElementsByTagName("head")[0],a=t.document.createElement("script");r=P(r,s),r+=k(s,r);var u=null;e.cache&&!i&&(u=e.memo(r,j.mime));var h=null;L.isFunction(n)?h=n:L.isObject(n)&&(h=I(n));var c=new T(null,h);if(u)c.done(u,null);else{var l="jsonp"+L.uid();t[l]=function(n){return o.removeChild(a),delete t[l],e.memo(r,j.mime,n),c.done(n,null)},a.type="text/javascript",a.src=r.replace(/=\$JSONP/gi,"="+l),o.appendChild(a)}return c},N=function(t,e,n,i){return t.type=e,t.contentType="application/x-www-form-urlencoded",U(t,n),D(t,i)};E.prototype={jsonp:function(t,e,n,i){var r=L.extend({},this);return r.url=t,r.params=e,R(r,n,i)},get:function(t,e,n){return this.type=j.type,delete this.contentType,U(this,t),D(this,e,n)},post:function(t,e){return N(this,"POST",t,e)},put:function(t,e){return N(this,"PUT",t,e)},"delete":function(t,e){return N(this,"DELETE",t,e)},getUrl:function(){var t=S(this,"url","");if(!t)throw Error("URL is not defined")},getParams:function(){return S(this,"params",{})},getType:function(){return S(this,"type",j.type)},getContentType:function(){return S(this,"contentType",null)},getDataType:function(){return S(this,"dataType",j.mime)},getHeaders:function(){return S(this,"header",{})},memo:function(t,e,n){var i=t+e;return L.isDefined(n)&&(this.memoize[i]=n),this.memoize[i]}};var F={next:function(t,e){var n=t.parentNode;L.forEach(e,function(e){n.insertBefore(e,t.nextSibling),t=e})},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},ready:function(e){"complete"===document.readyState?setTimeout(e,0):t.addEventListener("load",e),t.addEventListener("hashchange",e)}},_=function(t,e){var n=function(n){L.debug("Fired '"+n.type+"' listener on '"+e.name+"' for element "+t.tagName);var i=this.value();i=L.trim(i),this.pipes.length>0?this.pipeline(function(){},i):e.obj.value!==i&&(e.obj.value=i)}.bind(this),i=t.getAttribute(c);this.$=t,this._id=L.uid(),this.index=i?parseInt(i):-1,this.tie=t.getAttribute(l),this.bind=e,this.events={},this.isInput=L.eqi(t.tagName,"input"),this.hasCheck=L.eqi(t.type,"radio")||L.eqi(t.type,"checkbox"),this.display=t.style.display,this.shown=!0,this.textEl=null,this.isInput&&(this.hasCheck?(L.debug("Added change listener on '"+e.name+"' for element "+t.tagName),t.addEventListener("change",n)):"oninput"in t?(L.debug("Added input listener on '"+e.name+"' for element "+t.tagName),t.addEventListener("input",n)):(L.debug("Added keydown listener on '"+e.name+"' for element "+t.tagName),t.addEventListener("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||n(t)})));var r=this.tie.replace(/\.([^.|]+(\.[^.|]+)*)/g,'|property:"$1"').match(/[^|]+/g).splice(1);this.pipes=[],L.forEach(r,function(t){this.pipes.push(new $(t))},this),this.pipeline=function(t,e){var n=this.bind.obj;this.pipes.length>0?L.async(this.pipes,function(t,i){function r(r){n=r,t.changeRoutes()&&L.isUndefined(e)&&L.isFunction(n.$location)&&(n.$shown=n.$location().route.has(n)),i(n)}var s;s=L.isDefined(e)?t.process(n,r,e):t.process(n,r),s&&r(s)},function(){t(n)}):t(n)}};_.prototype={setAttribute:function(t,e){if(n===t)this.value(e);else if(r===t)this.text(e);else if(L.isFunction(e)){var i=this.events[t];i&&this.$.removeEventListener(t,i),i=function(t){t.index=this.index,t.tie=this.tie,M(e,this.bind.obj,this.bind.obj.$ready(),t)}.bind(this),this.events[t]=i,this.$.addEventListener(t,i)}else L.isDefined(e)?this.$.setAttribute(t,e):this.$.setAttribute(t,"")},value:function(t){if(this.hasCheck){if(!L.isDefined(t))return this.$.checked;t?this.$.setAttribute("checked","checked"):this.$.removeAttribute("checked")}else{if(!this.isInput)return this.text(t);if(!L.isDefined(t))return this.$.value;this.$.value=t}return null},text:function(e){return L.isDefined(e)?(this.isInput?(null==this.textEl&&(this.textEl=t.document.createElement("span"),this.next(this.textEl)),this.textEl.textContent=e):this.$.textContent=e,null):this.isInput?this.$.nextSibling.textContent||"":this.$.textContent||""},remove:function(){var t=this.$,e=this.bind.$;e.splice(e.indexOf(this),1),delete this.$,delete this.bind,delete this._id,delete this.isInput,delete this.hasCheck,delete this.events,F.remove(t)},next:function(t){var e=this.$;F.next(e,t)},show:function(t){this.shown!==t&&(t?(this.$.style.display=this.display,null!=this.textEl&&(this.textEl.style.display=this.display)):(this.display=this.$.style.display,this.$.style.display="none",null!=this.textEl&&(this.textEl.style.display="none")),this.shown=t)}};var L={debugEnabled:!1,isUndefined:function(t){return void 0==t},isDefined:function(t){return void 0!=t},isObject:function(t){return null!=t&&"object"==typeof t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isDate:function(t){return"[object Date]"==Object.prototype.toString.apply(t)},isArray:function(t){return Array.isArray(t)||"[object Array]"==Object.prototype.toString.apply(t)},isCollection:function(t){return this.isArray(t)||t instanceof Array||"[object NodeList]"==Object.prototype.toString.apply(t)||"[object NamedNodeMap]"==Object.prototype.toString.apply(t)||"[object Arguments]"==Object.prototype.toString.apply(t)},isFunction:function(t){return"function"==typeof t},isBoolean:function(t){return"boolean"==typeof t},trim:function(t){return this.isString(t)?t.replace(/^\s*/,"").replace(/\s*$/,""):t},lowercase:function(t){return this.isString(t)?t.toLowerCase():t},uppercase:function(t){return this.isString(t)?t.toUpperCase():t},toInt:function(t){return parseInt(t,10)},toFloat:function(t){return parseFloat(t)},eqi:function(t,e){return this.lowercase(t)===this.lowercase(e)},clone:function(t){if(!t||!this.isObject(t))return t;var e=this.isCollection(t)?[]:Object.create(Object.getPrototypeOf(t));return e=this.extend(e,t,function(t){return t&&this.isObject(t)&&(t=this.clone(t)),t}.bind(this))},convert:function(t,e){var n=t,i=function(t,n){return L.isString(n)&&"#"==n[0]?e[n.substring(1)]:n};return"true"===t?n=!0:"false"===t?n=!1:/^\d*$/.test(t)?n=-1!=t.indexOf(".")?this.toFloat(t):this.toInt(t):"["==t[0]&&"]"==t[t.length-1]?(t=t.replace(/'/g,'"'),n=JSON.parse(t,i)):"{"==t[0]&&"}"==t[t.length-1]?(t=t.replace(/'/g,'"'),n=JSON.parse(t,i)):('"'==t[0]||"'"==t[0])&&(n=t.substring(1,t.length-1)),n},forEach:function(t,e,n,i){if(n||(n=this),e)if(this.isCollection(t)){var r=-1,s=t.length,o=[];if(i){for(;s>++r;)o.push(t[r]);r=-1}else o=t;for(;s>++r&&e.call(n,o[r],r,t)!==!1;);}else e.call(n,t,0,[t]);return t},forIn:function(t,e,n,i){if(n||(n=this),e)for(var r in t)if((t.hasOwnProperty(r)||i)&&e.call(n,t[r],r,t)===!1)break;return t},async:function(t,e,n){function i(){var s=r.shift();if(0===s||s){var o=t[s];e(o,i)}else n(t)}var r=[];if(this.isCollection(t))for(var s=-1,o=t.length;o>++s;)r.push(s);else r=Object.keys(t);i()},uid:function(){return f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()},extend:function(t,e,n){return this.isCollection(t)&&this.isCollection(e)?this.forEach(e,function(e,i){n&&(e=n(e,i)),t.push(e)}):this.forIn(e,function(e,i){n&&(e=n(e,i)),t[i]=e},this),t},debug:function(t,e){this.debugEnabled&&(e&&(console.groupEnd(),console.groupCollapsed(e)),console.log(t))}},q=function(t){L.extend(this,t)};q.prototype=L,q.prototype.$attr=function(t,e){if(this.attrs){var n=this.attrs[t];if(L.isUndefined(e)){if(n)return n.val(this)}else n&&n.property?this.$prop(n.property,e):n&&this.$prop(t,e)}return null},q.prototype.$prop=function(t,e){for(var n=this,i=t.split("."),r=1,s=i.length;s>r;)n=n[i[r-1]],r++;var o=i[s-1];return L.isUndefined(e)?n[o]:(n[o]=e,null)},q.prototype.$ready=function(){var t=!0;return L.forEach(this.$deps,function(e){var n=this["$"+e];return n._empty?(t=!1,!1):!0},this),t};var M=function(t,e,n){var i,r=3;L.isUndefined(n)&&L.isFunction(e.$ready)&&(n=e.$ready(),r=2);try{var s=Array.prototype.slice.call(arguments,r);i=t.apply(e,s)}catch(o){i=void 0,n&&(console.groupCollapsed("User code error"),console.error("Is ready and had an error:"+o.message),console.dir(o),console.groupEnd())}return i},W=function(t,e,i){L.isUndefined(i)&&(i=-1);var r=t.values;return i>=0&&r&&L.isDefined(r[i][e])?r[i][e]:i>=0&&r&&n==e?r[i]:t.$prop(e)},J=function(t,e,n){var i=this.name,r=this.value,s=this.property;if(L.isUndefined(n)&&(n=t.$ready()),L.isFunction(r))return M(r,t,n);if(s&&L.isUndefined(r))return W(t,s,e);if(!i)throw Error("Where is your property?");return W(t,i,e)},B=function(t,e,n){this.name=t,this.touch=[],this.values={},this.depends=e||[],this.rendered=!1,this.loaded=!1,this.loading=!1,this.selected=!1,this.applyCount=0,this.timeout=null,this.e=0,this.apply=function(){this.applyCount++,this.applyCount>10&&L.debug("Too many apply :"+this.name+" - "+this.applyCount),this.rendered&&this.render(),L.forEach(this.touch,function(t){var e=n[t];e&&(e.obj["$"+this.name]=this.obj)},this),this.timeout||(this.timeout=setTimeout(function(){this.timeout=null,this.applyCount=0}.bind(this),3e3))}};B.prototype={prepareRoutes:function(){var t=this.obj.routes;t&&(L.isArray(t)&&(this.obj.routes=t._({})),L.forIn(this.obj.routes,function(t,e){t=L.isFunction(t)?{path:e,handler:t}:{path:e},this.obj.routes[e]=t},this))},prepareAttrs:function(){var t=this.obj.attrs;t&&(L.isArray(t)&&(this.obj.attrs=t._({})),L.forIn(this.obj.attrs,function(t,e){t=L.isString(t)&&"#"==t[0]?{name:e,property:t.substring(1)}:L.isFunction(t)?{name:e,value:t}:t[h]?{name:t[h]}:{name:e,value:t},t.val=J,this.obj.attrs[e]=t},this))},prepareValues:function(){var t=this.obj.values;if(t){if(this.$.length-this.e==t.length)return this.rendered=!1,void 0;var e={},n={};L.forEach(this.$,function(t){t.index>=0&&t.remove()},this,!0),L.forEach(t,function(t,i){L.forEach(this.$,function(t){var r=t._id,s=n[r];s||(n[r]=s=t.$);var o=e[r];o||(e[r]=o=[]);var a=s.cloneNode(!0);s.style.display="",a.setAttribute(c,i),o.push(a)})},this),L.forEach(this.$,function(t){var n=t.$;n.style.display="none",F.next(n,e[t._id])}),this.selected=!1}},show:function(t){this.rendered&&L.forEach(this.$,function(e){e&&e.show(t)},this)},validateShow:function(){this.loaded||this.loading||this.load(),L.forEach(this.$,function(t){t&&t.pipeline(function(e){var n=e.$shown;n&&!this.rendered&&this.render(),t.show(n)}.bind(this))},this)},render:function(){if(this.obj.$shown){var t=this.name;L.debug("Render "+t,t+" Render"),this.loaded||this.loading||this.load(),L.forEach(this.$,function(e){e&&e.pipeline(function(n){var i=n.$ready(),r=n.attrs,s=e.index;r&&(L.forIn(r,function(t){var r=t.val(n,s,i),o=t.name;L.debug("Render attribute '"+o+"' with value "+r),e.setAttribute(o,r)}),e.setAttribute(d),e.isInput&&e.setAttribute("name",t))})},this),this.show(this.obj.$shown),this.rendered=!0,L.debug("Rendered "+t)}}};var H=null,V=function(){var n={};return function(i,r,s){i!=e&&null==n[e]&&t.tie(e,{});var o=n[i];if(!o||o.obj._empty||!L.isUndefined(s)&&o.depends!==s){var a=V.prototype.init(i,r,s,n);return V.prototype.define(i,a,n),i==e&&(H=a,y.init(H),F.ready(function(){y.locate(n)})),a.obj}return V.prototype.update(o,r)}};V.prototype={select:function(e,n){var i=t.document.querySelectorAll("["+l+'="'+e+'"]'),r=[];return L.forEach(i,function(t){r.push(new _(t,n))}),i=t.document.querySelectorAll("["+l+'^="'+e+'|"]'),L.forEach(i,function(t){r.push(new _(t,n))}),i=t.document.querySelectorAll("["+l+'^="'+e+' |"]'),L.forEach(i,function(t){r.push(new _(t,n))}),i=t.document.querySelectorAll("["+l+'^="'+e+'."]'),L.forEach(i,function(t){r.push(new _(t,n))}),n.selected=!0,r},wrapPrimitive:function(t){return{value:t,attrs:[n]}},wrapFunction:function(t){return{attrs:{value:t}}},wrapArray:function(t){return{values:t,attrs:[n]}},check:function(t){return L.isFunction(t)?t=this.wrapFunction(t):!L.isObject(t)||L.isDate(t)?t=this.wrapPrimitive(t):L.isArray(t)&&(t=this.wrapArray(t)),L.isUndefined(t.$shown)&&(t.$shown=!0),L.isUndefined(t.attrs)&&(t.attrs={}),L.isUndefined(t.routes)&&null!=H&&H.obj.routes&&(t.routes=H.obj.routes),new q(t)},resolve:function(t,e,n){e&&L.forEach(e,function(e){var i=n[e];i||(i={name:e,touch:[],obj:{_empty:!0}},this.define(e,i,n)),t.obj["$"+e]=i.obj,-1==i.touch.indexOf(t.name)&&i.touch.push(t.name)},this)},define:function(t,e,n){var i=n[t];n[t]=e,i&&i.touch&&(e.touch=i.touch,e.rendered=i.rendered,L.debug("Calling apply on '"+e.name+"' after define"),e.apply())},update:function(t,e){var n=t.name;return L.debug("Update tie "+n,n),L.extend(t.obj,this.check(e)),t.prepareAttrs(),t.prepareRoutes(),t.prepareValues(),L.debug("Prepared inner array structure"),t.obj=v(t),t.selected||(this.$=V.select(n,t),L.debug("Elements reselected: "+this.$.length)),t.rendered||t.render(),t},init:function(t,e,n,i){L.debug("Tie "+t,t);var r=new B(t,n,i);r.obj=this.check(e),r.prepareAttrs(),r.prepareRoutes(),this.resolve(r,n,i),r.obj.$deps=r.depends,r.obj=v(r),L.debug("Bind model ready");var s=this;return r.load=function(){this.loading=!0,this.selected||(this.$=s.select(t,r),this.e=this.$.length,L.debug("Elements selected: "+this.$.length)),r.prepareValues(),L.debug("Prepared inner array structure"),this.selected||(this.$=s.select(t,r),L.debug("Elements reselected: "+this.$.length)),this.loaded=!0,this.loading=!1},r}},t.tie=V(),t.tie.pipes=g,t.tie.enableDebug=function(t){L.debugEnabled=t},g("property",function(t,e,i,r){if(e){var s=e[0],o=e.length>1?e[1]:n;L.isUndefined(r)?t.$prop(o,t.$prop(s)):t.$prop(s,r)}i(t)},{canWrite:!0}),g("value",function(t,e){if(e){var n=e[0],i=e.length>1?e[1]:null;t.$prop(n,i)}return t}),g("routes",function(t,e){if(e){var n="+"===e[0],i="-"===e[0];n?(e.splice(0,1),this.forEach(e,function(e){t.routes[e]={path:e}})):i?(e.splice(0,1),this.forEach(e,function(e){delete t.routes[e]})):(t.routes={},this.forEach(e,function(e){t.routes[e]={path:e}}))}return t},{changeRoutes:!0}),g("load",function(t,e,n){var i={};if(e){var r=this.trim;this.forEach(e,function(t){var e=t.split(":");i[r(e[0])]=2==e.length?r(e[1]):""})}t.http.get(i,function(e,i){i?console.err(i):L.isObject(e)?L.extend(t,e):console.log("Response received:"+e),n(t)})})})(window);